<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../../public/css/xadmin.css">
    <script type="text/javascript" src="../../public/js/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="../../public/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../public/js/xadmin.js"></script>
    <script type="text/javascript" src="../../public/js/tableSelect.js"></script>
    <script type="text/javascript" src="../../public/js/data.js"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        .widthauto {
                width: auto !important;
            }

            .tips_red {
                color: red;
            }

            .layui-form-label {
                padding-left: 0;
                width: 120px;
            }

            .layui-input-block {
                margin-left: 115px;
            }

            .layui-elem-quote {
                font-size: 18px;
            }

            .layui-elem-field {
                margin: 0;
            }

            .layui-elem-field:last-child {
                margin-bottom: 40px;
            }

            .layui-elem-field legend {
                font-size: 16px;
                margin-bottom: 15px;
            }

            .layui-upload-img {
                width: 92px;
                height: 92px;
                margin: 0 10px 10px 0;
            }

            .Since_inline {
                display: inline-block;
                width: auto !important;
                line-height: 38px;
            }

            .layui-elem-quote .layui-form-switch {
                margin: 0 15px;
                margin-top: 0;
            }

            .layui-form-item .layui-input-inline {
                width: 140px;
            }

            #suozaidi .layui-input-inline {
                width: 190px;
            }

            .nowHide {
                display: none;
            }

            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                -webkit-appearance: none;
            }
            input[type="number"]{
                -moz-appearance: textfield;
            }
            .saleList{
                border: 1px solid #e6e6e6;
                padding: 0 10px;
                background: #fff;
                border-radius: 6px;
                margin-bottom: 10px;
            }
            .sale-item{
                padding: 9px 0;
                height:60px
            }
            .numInput{
                width: 100px;
                display: inline-block !important;
                margin: 0 5px;
            }
            .delBtn{
                width: 60px;
                display: inline-block;
                height: 60px;
                cursor: pointer;
                margin-left: 10px;
            }
            .delBtn i {
                border-radius: 50%;
                height: 60px;
                width: 60px;
                line-height: 20px;
                text-align: center;
                font-size: 24px;
                background: #FF5722;
                color: #fff;
            }
        </style>
</head>

<body id="iosiframe">
    <div class="x-body">
        <div class="layui-row">
            <div class="layui-form" action="" lay-filter="cardAdd">
                <!--隐藏-->
                <!--基本信息-->
                <blockquote class="layui-elem-quote">基本信息</blockquote>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width:100px">服务商类型</label>
                    <div class="layui-input-block" id="typeBox">
                        <input type="radio" name="agentType" value="0" title="全国服务商" lay-filter="cardvalid" checked="">
                        <input type="radio" name="agentType" value="1" title="省级服务商" lay-filter="cardvalid">
                        <input type="radio" name="agentType" value="2" title="市级服务商" lay-filter="cardvalid">
                        <input type="radio" id="dlNum1027" style="display:none" name="agentType" value="3" title="股权服务商" lay-filter="cardvalid">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width:100px">加盟类型</label>
                    <div class="layui-input-block" id="franchiseType">
                        <input type="radio" name="franchiseType" value="0" title="直营" lay-filter="cardvalid" checked="">
                        <input type="radio" name="franchiseType" value="1" title="代理" lay-filter="cardvalid">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width:100px">服务商名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="agentName" lay-verify="title" autocomplete="off" placeholder="请输入服务商名称" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width:100px">用户名</label>
                    <div class="layui-input-block">
                        <input type="text" name="userName" lay-verify="title" autocomplete="off" placeholder="请输入用户名" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width:100px">联系电话</label>
                    <div class="layui-input-block">
                        <input type="text" name="registerCell" lay-verify="phone" autocomplete="off" placeholder="请输入联系电话" class="layui-input">
                    </div>
                </div>
                <!-- <div class="layui-form-item">
                        <label class="layui-form-label">密码</label>
                        <div class="layui-input-block">
                            <input type="text" name="cardName" lay-verify="title" autocomplete="off" placeholder="请输入密码" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">确认密码</label>
                        <div class="layui-input-block">
                            <input type="text" name="cardName" lay-verify="title" autocomplete="off" placeholder="请确认密码" class="layui-input">
                        </div>
                    </div> -->
                <div class="layui-form-item" id="suozaidi">
                    <label class="layui-form-label" style="width:100px">所在地</label>
                    <div class="layui-input-block" style="display: flex;">
                        <div class="layui-input-inline">
                            <select name="province" id="provice" lay-filter="provice" lay-verify="title">
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="city" id="city" lay-filter="city" lay-verify="title">
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="area" id="area" lay-filter="area" lay-verify="title">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" style="width:100px">详细地址</label>
                    <div class="layui-input-block">
                        <input type="text" name="address" lay-verify="title" autocomplete="off" placeholder="请输入详细地址" class="layui-input">
                    </div>
                </div>
                <blockquote class="layui-elem-quote">费率设置(费率单位为百分比，示例：0.38%)</blockquote>
                <div class="layui-form-item">
                    <div class="layui-input-item">
                        <span style="color:red;display:block;margin-left:30px">*支付宝微信：建议费率 0.23-0.60，不得低于0.20</span>
                    </div>
                    <div class="layui-input-item">
                        <span style="color:red;display:block;margin-left:30px">*云闪付费率1为单笔1000以内包括1000所设置，建议费率 0.23-1.00 之间，不得低于0.23</span>
                    </div>
                    <div class="layui-input-item">
                        <span style="color:red;display:block;margin-left:30px">*云闪付费率2为单笔1000以上所设置，建议费率 0.52-1.00 之间，不得低于0.52</span>
                    </div>
                </div>
                <fieldset class="layui-elem-field layui-field-title alipay" style="display:none">
                    <legend>官方支付宝</legend>
                    <div class="layui-form-item">
                        <label class="layui-form-label">支付宝费率(%)</label>
                        <div class="layui-input-inline">
                            <input type="text" name="gfAliRate" lay-verify="aliorwxRate" autocomplete="off" placeholder="建议费率 0.23-0.60" class="layui-input" value="">
                        </div>
                    </div>
                </fieldset>
                <fieldset class="layui-elem-field layui-field-title wechatpay" style="display:none">
                    <legend>官方微信</legend>
                    <div class="layui-form-item">
                        <label class="layui-form-label">微信费率(%)</label>
                        <div class="layui-input-inline">
                            <input type="text" name="gfWeChatRate" lay-verify="aliorwxRate" autocomplete="off" placeholder="建议费率 0.23-0.60" class="layui-input" value="">
                        </div>
                    </div>
                </fieldset>
                <fieldset class="layui-elem-field layui-field-title fuyou" style="display:none">
                    <legend>富友通道</legend>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">支/微费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="fyweChatRate" lay-verify="aliorwxRate" autocomplete="off" placeholder="建议费率 0.23-0.60" class="layui-input" value="">
                            </div>
                        </div>
                        <!-- <div class="layui-inline">
                                <label class="layui-form-label">支付宝费率(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="fyaliRate" lay-verify="aliorwxRate" autocomplete="off"
                                        placeholder="请输入费率" class="layui-input" value="0.30">
                                </div>
                            </div> -->
                        <div class="layui-inline">
                            <label class="layui-form-label">云闪付费率1(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="fyUnionPayRate" lay-verify="ysf1Rate" autocomplete="off" placeholder="建议费率 0.23-1.00" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">云闪付费率2(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="fyUnionPayRatetwo" lay-verify="ysf2Rate" autocomplete="off" placeholder="建议费率 0.52-1.00" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">京东钱包费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="fyJDWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">qq钱包费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="fyQQWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">翼支付费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="fyWingPayRate" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="layui-elem-field layui-field-title xdl" style="display:none">
                    <legend>新大陆通道</legend>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">支/微费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="xdlweChatRate" lay-verify="aliorwxRate" autocomplete="off" placeholder="建议费率 0.23-0.60" class="layui-input" value="">
                            </div>
                        </div>
                        <!-- <div class="layui-inline">
                                <label class="layui-form-label">支付宝费率(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="xdlaliRate" lay-verify="aliorwxRate" autocomplete="off"
                                        placeholder="请输入费率" class="layui-input" value="0.30">
                                </div>
                            </div> -->
                        <div class="layui-inline">
                            <label class="layui-form-label">云闪付费率1(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="xdlUnionPayRate" lay-verify="ysf1Rate" autocomplete="off" placeholder="建议费率 0.23-1.00" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">云闪付费率2(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="XdlUnionPayRatetwo" lay-verify="ysf2Rate" autocomplete="off" placeholder="建议费率 0.52-1.00" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">京东钱包费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="xdlJDWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">qq钱包费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="xdlQQWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">翼支付费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="xdlWingPayRate" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="layui-elem-field layui-field-title sxf" style="display:none">
                    <legend>随行付通道</legend>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">支/微费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="sxfweChatRate" lay-verify="aliorwxRate" autocomplete="off" placeholder="建议费率 0.23-0.60" class="layui-input" value="">
                            </div>
                        </div>
                        <!-- <div class="layui-inline">
                                <label class="layui-form-label">支付宝费率(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="sxfaliRate" lay-verify="aliorwxRate" autocomplete="off"
                                        placeholder="请输入费率" class="layui-input" value="0.30">
                                </div>
                            </div> -->
                        <div class="layui-inline">
                            <label class="layui-form-label">云闪付费率1(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="sxfUnionPayRate" lay-verify="ysf1Rate" autocomplete="off" placeholder="建议费率 0.23-1.00" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">云闪付费率2(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="sxfUnionPayRatetwo" lay-verify="ysf2Rate" autocomplete="off" placeholder="建议费率 0.52-1.00" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">京东钱包费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="sxfJDWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">qq钱包费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="sxfQQWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline  nowHide">
                            <label class="layui-form-label">翼支付费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="sxfWingPayRate" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="layui-elem-field layui-field-title ls" style="display:none">
                    <legend>乐刷通道</legend>
                    <fieldset style="border-color: #fff;">
                        <legend style="font-size:12px">扫码成本</legend>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">支/微费率(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsweChatRate" lay-verify="aliorwxRate" autocomplete="off" placeholder="建议费率 0.23-0.60" class="layui-input" value="">
                                </div>
                            </div>
                            <!-- <div class="layui-inline">
                            <label class="layui-form-label">支付宝费率(%)</label>
                            <div class="layui-input-inline">
                                <input type="text" name="lsaliRate" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="0.30">
                            </div>
                        </div> -->
                            <div class="layui-inline">
                                <label class="layui-form-label">云闪付费率1(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsUnionPayRate" lay-verify="ysf1Rate" autocomplete="off" placeholder="建议费率 0.23-1.00" class="layui-input" value="">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">云闪付费率2(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsUnionPayRatetwo" lay-verify="ysf2Rate" autocomplete="off" placeholder="建议费率 0.52-1.00" class="layui-input" value="">
                                </div>
                            </div>
                            <div class="layui-inline  nowHide">
                                <label class="layui-form-label">京东钱包费率(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsJDWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                                </div>
                            </div>
                            <div class="layui-inline  nowHide">
                                <label class="layui-form-label">qq钱包费率(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsQQWallet" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                                </div>
                            </div>
                            <div class="layui-inline  nowHide">
                                <label class="layui-form-label">翼支付费率(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsWingPayRate" lay-verify="baifenbi" autocomplete="off" placeholder="请输入费率" class="layui-input" value="">
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset style="border-color: #fff">
                        <legend style="font-size:12px">刷卡成本</legend>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">借记卡D1(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsDebitCardD1" lay-verify="lsDebitCardD1" autocomplete="off" placeholder="建议费率 0.40-1" class="layui-input" value="">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">贷记卡D1(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsCreditCardD1" lay-verify="lsCreditCardD1" autocomplete="off" placeholder="建议费率 0.51-1.00" class="layui-input" value="">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">借记卡D0(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsDebitCardD0" lay-verify="lsDebitCardD0" autocomplete="off" placeholder="建议费率 0.42-1.00" class="layui-input" value="">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">贷记卡D0(%)</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="lsCreditCardD0" lay-verify="lsCreditCardD0" autocomplete="off" placeholder="建议费率 0.53-1.00" class="layui-input" value="">
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </fieldset>
                <fieldset class="layui-elem-field layui-field-title levelA" style="display:none">
                    <legend>抽成比例</legend>
                    <div class="layui-form-item">
                        <label class="layui-form-label">抽成比例(%)</label>
                        <div class="layui-input-inline" style="width:200px">
                            <input type="number" id="proportional" name="proportional" required="" lay-verify="" autocomplete="off" class="layui-input" placeholder="建议1-100之间" onmousewheel="return false;">
                        </div>
                    </div>
                </fieldset>
                <blockquote class="layui-elem-quote">
                    补贴设置
                    <input type="checkbox" name="subsidySetting" lay-skin="switch" lay-filter="subsidySetting" lay-text="开|关">
                </blockquote>
                <div id="butieBox" style="display:none">
                    <div class="layui-form-item">
                        <label class="layui-form-label" style="width:100px">补贴金额</label>
                        <div class="layui-input-block" style="width:300px">
                            <input type="number" name="cappedAmount" lay-verify="butie" autocomplete="off" placeholder="请输入补贴金额,必须为数字" class="layui-input" value="">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label" style="width:100px">补贴商户类型</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="personal" title="个人" lay-filter="merType">
                            <input type="checkbox" name="individual" title="个体" lay-filter="merType">
                            <input type="checkbox" name="enterprise" title="企业" lay-filter="merType">
                        </div>
                    </div>
                    <div class="box-item">
                        <div class="layui-form-item" style="display:inline-block">
                            <label class="layui-form-label"><span style="color:red;font-size:25px;vertical-align: middle">*</span>补贴时间</label>
                            <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:0px;">
                                <div class="layui-input-clear"><i class="layui-icon layui-unselect layui-tab-close">ဆ</i></div>
                                <input type="text" lay-verType="tips" name="startTime" lay-verify="butie" autocomplete="off" placeholder="请选择开始日期" class="layui-input" id="startTime">
                            </div>
                            <div style="width:30px;text-align:center;display:inline-block" class="sfzNoChangqi">-</div>
                            <div class="layui-input-block sfzNoChangqi" style="display:inline-block;width:200px;margin-left:5px;">
                                <div class="layui-input-clear"><i class="layui-icon layui-unselect layui-tab-close">ဆ</i></div>
                                <input type="text" lay-verType="tips" name="endTime" lay-verify="butie" autocomplete="off" placeholder="请选择结束日期" class="layui-input" id="endTime">
                            </div>
                        </div>
                    </div>
                    <fieldset class="layui-elem-field layui-field-title ">
                        <legend>延续补贴时间</legend>
                        <div class="layui-form-item">
                            <label class="layui-form-label">延续补贴时间</label>
                            <div class="layui-input-block">
                                <input type="radio" name="continuing" value="0" title="不延续" checked="">
                                <input type="radio" name="continuing" value="1" title="1个月">
                                <input type="radio" name="continuing" value="2" title="2个月">
                                <input type="radio" name="continuing" value="3" title="3个月">
                                <input type="radio" name="continuing" value="4" title="4个月">
                                <input type="radio" name="continuing" value="5" title="5个月">
                                <input type="radio" name="continuing" value="6" title="6个月">
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="layui-elem-field layui-field-title ">
                        <legend>累计计算数量</legend>
                        <div class="layui-form-item">
                            <label class="layui-form-label">累计计算数量</label>
                            <div class="layui-input-block">
                                <input type="radio" name="cumulative" value="0" title="不累计" checked="">
                                <input type="radio" name="cumulative" value="1" title="累计">
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="layui-elem-field layui-field-title ">
                        <legend>补贴标准</legend>
                        <div class="layui-form-item">
                            <label class="layui-form-label" style="width:100px">交易类型</label>
                            <div class="layui-input-block">
                                <input type="checkbox" name="subsidyStandard0" title="扫码" lay-filter="standType">
                                <input type="checkbox" name="subsidyStandard8" title="刷脸" lay-filter="standType">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">补贴标准</label>
                            <div class="layui-input-block">
                                月日均笔数 ≥ <input type="number" name="transactionNumber" class="layui-input numInput" placeholder="请输入数字" lay-verify="butie"> 、交易金额 ≥ <input type="number" name="transactionAmount" class="layui-input numInput" placeholder="请输入数字" lay-verify="butie"> 元
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="layui-elem-field layui-field-title ">
                        <legend>补贴规则</legend>
                        <div class="layui-form-item">
                            <label class="layui-form-label">补贴规则</label>
                            <div class="layui-input-inline" style="">
                                <button type="button" class="layui-btn" id="addSale" style="margin-right: 15px;">添加</button>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <ul class="layui-input-inline saleList" id="saleList" style="width: calc(100% - 300px);">
                                    <li class="sale-item">
                                        规则1：(有效商户数≥ <input type="number" name="bishu" class="layui-input numInput" placeholder="请输入数字" lay-verify="butie">,奖励金额：<input type="number" name="bishu" class="layui-input numInput" placeholder="请输入数字" lay-verify="butie">元)
                                        <div class="delBtn delSale" data-id="0"><i class="layui-icon layui-unselect layui-tab-close">ဆ</i></div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <blockquote class="layui-elem-quote" style="margin-top:10px">
                    营销补贴设置
                    <input type="checkbox" name="marketingSubsidies" lay-skin="switch" lay-filter="marketingSubsidies" lay-text="开|关">
                </blockquote>
                <div id="yingxiaoBox" style="display:none">
                    <div class="layui-form-item">
                        <label class="layui-form-label" style="width:100px">最多补贴金额</label>
                        <div class="layui-input-block" style="width:300px">
                            <input type="number" name="marketSubsidyMoney" lay-verify="yingxiao" autocomplete="off" placeholder="请输入最多补贴金额,必须为数字" class="layui-input" value="">
                        </div>
                    </div>
                </div>
                <!-- <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">T1费率(%)</label>
                            <div class="layui-input-block" style="width:200px">
                                <input type="text" name="T1Rate" lay-verify="title" autocomplete="off" placeholder="T1费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">D1费率(%)</label>
                            <div class="layui-input-block" style="width:200px">
                                <input type="text" name="D1Rate" lay-verify="title" autocomplete="off" placeholder="D1费率" class="layui-input" value="">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">D0费率(%)</label>
                            <div class="layui-input-block" style="width:200px">
                                <input type="text" name="D0Rate" lay-verify="title" autocomplete="off" placeholder="D0费率" class="layui-input" value="">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label"></label>
                        <div class="layui-input-block">
                            <span style="color:red">*注：费率为百分位,单位为%。例如：千分之三则填0.3</span>
                        </div>
                    </div> -->
                    <blockquote class="layui-elem-quote">
                    返利卡设置
                    <input type="checkbox" name="agencyCustom" lay-skin="switch" lay-filter="agencyCustom" lay-text="开|关">
                </blockquote>
                <div class="layui-form-item layui-layout-admin">
                    <div class="layui-input-block">
                        <div class="layui-footer" style="left: 0;text-align: center;">
                            <button class="layui-btn" lay-submit="" lay-filter="add">立即提交</button>
                            <button type="reset" class="layui-btn layui-btn-primary" id="quxiao">取消</button>
                        </div>
                        <!--<i class="layui-icon" lay-tips="推荐追求开发效率和缺乏前端开发经验的使用，后端开发者的最爱。">123123123</i>-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../../common/config-organ.js"></script>
    <script src="../../common/utility.js"></script>
    <script>
    function compare(property) {
        return function(a, b) {
            var value1 = a[property];
            var value2 = b[property];
            return value1 - value2;
        }
    }
    var subsidySetting = 1

    // 营销补贴设置
    var marketingSubsidies = 1
    var subsidyType = {
        personal: 1,
        individual: 1,
        enterprise: 1
    }
    var btOff = true
    var saleList = new Array()

    var subsidyStandard8 = 1
    var subsidyStandard0 = 1
    var agencyCustom = 1
    $('#addSale').click(function() {
        if (saleList.length >= 5) {
            layer.msg('最多可以有5条规则')
            return
        }
        var ob = new Object()
        ob.merchantCount = ''
        ob.subsidyAmount = ''
        saleList.push(ob)
        createList()
    })

    function createList() {
        var str = ''
        for (var i = 0; i < saleList.length; i++) {
            str += '<li class="sale-item"> 规则' + (i + 1) + '：(有效商户数≥ <input type="number" name="bishu"  data-id="' + i + '"  class="layui-input numInput sale-count" placeholder="请输入数字" value="' + saleList[i].merchantCount + '">,奖励金额：<input type="number"  data-id="' + i + '" name="bishu" class="layui-input numInput sale-money" placeholder="请输入数字" value="' + saleList[i].subsidyAmount + '">元)<div class="delBtn delSale" data-id="' + i + '"><i class="layui-icon layui-unselectlayui-tab-close">ဆ</i></div> </li>'
        }
        $('#saleList').html(str)
        cli()
        inputCount()
        inputMoney()
    }

    function cli() {
        $('.delSale').click(function(e) {
            if (saleList.length == 1) {
                layer.msg('最少要保留一条补贴信息')
                return
            }
            var data = this
            var num = data.getAttribute('data-id')
            saleList.splice(num, 1)
            createList()
        })
    }

    function inputCount() {
        $('.sale-count').bind("input propertychange", function(event) {
            saleList[this.dataset.id].merchantCount = this.value
        })
        console.log(saleList)
    }

    function inputMoney() {
        $('.sale-money').bind("input propertychange", function(event) {
            saleList[this.dataset.id].subsidyAmount = this.value
        })

        console.log(saleList)
    }
    if (JSON.parse(sessionStorage.getItem("organUser")).institutionNumber == '1027') {
        $("#dlNum1027").show()
    }
    var index = parent.layer.getFrameIndex(window.name);
    $('#quxiao').click(function() {

        setTimeout(function() {
            parent.layer.close(index)
        }, 16);
    })
    var pyList = new Array()

    function subPage(data, data1) {
        var jgData = data
        console.log(jgData)
        var rateList = ['0.20', '0.21', '0.22', '0.23', '0.24', '0.25', '0.26', '0.27', '0.28', '0.30', '0.35',
            '0.38', '0.40', '0.50', '0.60'
        ]

        console.log(rateList)
        var strate = '<option value="">请选择费率</option>'
        for (var r = 0; r < rateList.length; r++) {
            strate += '<option value="' + rateList[r] / 100 + '">' + rateList[r] + '%</option>'
        }

        $('.rateBox').html(strate)
        var st = strate
        $('.xdlD1').html(st += '<option value="0.00235">0.235%</option>')
        $('.xdlD0').html(st += '<option value="0.00255">0.255%</option>')
        var p = [],
            c = [],
            aa = []
        var serverUrl = window.parent.serverUrl
        var userNumber = JSON.parse(sessionStorage.getItem('organUser')).institutionNumber;
        var agentNumber = jgData.agentNumber
        layui.use(['laydate', 'table', 'upload', 'form'], function() {
            var $ = layui.jquery,
                upload = layui.upload,
                laydate = layui.laydate,
                table = layui.table,
                form = layui.form,
                admin = layui.admin,
                element = layui.element,
                layer = layui.layer;
            var tableSelect = layui.tableSelect;
            laydate.render({
                elem: '#startTime' //指定元素
            });
            laydate.render({
                elem: '#endTime' //指定元素
            });
            var dlList = [{
                    "name": '全国服务商',
                    "type": '0'
                },
                {
                    "name": '省级服务商',
                    "type": '1'
                },
                {
                    "name": '市级服务商',
                    "type": '2'
                }, {
                    "name": '城市合伙人',
                    "type": '3'
                },
            ]
            var dlList1 = [{
                    "name": '城市合伙人',
                    "type": '0'
                },
                {
                    "name": '区域运营商',
                    "type": '1'
                },
                {
                    "name": '代理加盟商',
                    "type": '2'
                },
                {
                    "name": '股东合伙人',
                    "type": '3'
                },
            ]
            if (JSON.parse(sessionStorage.getItem("organUser")).institutionNumber == '1027') {
                var str = '<input type="radio" name="agentType" value="' + dlList1[0].type + '" title="' +
                    dlList1[0].name + '" lay-filter="cardvalid" checked="">'
                for (var i = 1; i < dlList1.length; i++) {
                    str += '<input type="radio" name="agentType" value="' + dlList1[i].type + '" title="' +
                        dlList1[i].name + '" lay-filter="cardvalid" >'
                }
                $('#typeBox').html(str)
                form.render()
            } else {
                var str = '<input type="radio" name="agentType" value="' + dlList[0].type + '" title="' +
                    dlList[0].name + '" lay-filter="cardvalid" checked="">'
                for (var i = 1; i < dlList.length; i++) {
                    str += '<input type="radio" name="agentType" value="' + dlList[i].type + '" title="' +
                        dlList[i].name + '" lay-filter="cardvalid" >'
                }
                $('#typeBox').html(str)
                form.render()
            }
            CmsUtility.postAjaxCall(
                //系统设置
                CmsConfig.addressUrl.Mechanism.getOfficial + '?institutionNumber=' + JSON.parse(sessionStorage.getItem(
                    "organUser")).institutionNumber, {
                    "page": 1,
                    "limit": 10
                },
                function(data) {
                    console.log(data)
                    if (data.code == '1000') {

                        for (var i = 0; i < data.data.PaymentChannellist.length; i++) {
                            switch (data.data.PaymentChannellist[i].paymentChannelType) {
                                case 0:
                                    console.log('123')
                                    if (data.data.PaymentChannellist[i].disable == 0) {
                                        $('.alipay').show()
                                        pyList.push(0)
                                    }

                                    break;
                                case 1:
                                    if (data.data.PaymentChannellist[i].disable == 0) {
                                        $('.wechatpay').show()
                                        pyList.push(1)
                                    }

                                    break;
                                case 2:
                                    if (data.data.PaymentChannellist[i].disable == 0) {
                                        $('.fuyou').show()
                                        pyList.push(2)
                                    }

                                    break;
                                case 3:
                                    if (data.data.PaymentChannellist[i].disable == 0) {
                                        $('.yrm').show()
                                        pyList.push(3)
                                    }

                                    break;
                                case 4:
                                    if (data.data.PaymentChannellist[i].disable == 0) {
                                        $('.xdl').show()
                                        pyList.push(4)
                                    }

                                    break;
                                case 5:
                                    if (data.data.PaymentChannellist[i].disable == 0) {
                                        $('.sxf').show()
                                        pyList.push(5)
                                    }

                                    break;
                                case 6:
                                    if (data.data.PaymentChannellist[i].disable == 0) {
                                        $('.ls').show()
                                        pyList.push(6)
                                    }

                                    break;
                                default:
                                    // statements_def
                                    break;
                            }
                        }
                        console.log(pyList)
                        if (pyList.indexOf(0) < 0) {
                            removeElementsByClass('alipay')
                        }
                        if (pyList.indexOf(1) < 0) {
                            removeElementsByClass('wechatpay')
                        }
                        if (pyList.indexOf(2) < 0) {
                            removeElementsByClass('fuyou')
                        }
                        if (pyList.indexOf(3) < 0) {
                            removeElementsByClass('yrm')
                        }
                        if (pyList.indexOf(4) < 0) {
                            removeElementsByClass('xdl')
                        }
                        if (pyList.indexOf(5) < 0) {
                            removeElementsByClass('sxf')
                        }
                        if (pyList.indexOf(6) < 0) {
                            removeElementsByClass('ls')
                        }
                    } else {

                    }
                },
                function(data) {
                    console.log('222')
                }
            )
            window.removeElementsByClass = function(className) {
                var elements = document.getElementsByClassName(className);
                while (elements.length > 0) {
                    elements[0].parentNode.removeChild(elements[0]);
                }
            }
            // CmsUtility.postAjaxCall(
            //     //系统设置
            //     CmsConfig.addressUrl.Public.getAreajson, {},
            CmsUtility.postAjaxCall2(
                //系统设置
                'https://nb.51shanhe.com/shanhe-admin/insCommon/getAreajson', {},
                function(data) {

                    address = JSON.parse(data.data)
                    for (var i = 0; i < address.length; i++) {
                        var a = new Object()
                        a.provinceCode = address[i].value
                        a.provinceName = address[i].text
                        p.push(a)
                        var b = new Object()
                        b.provinceCode = address[i].value
                        b.children = []
                        for (var k = 0; k < address[i].children.length; k++) {
                            var d = new Object()
                            d.cityCode = address[i].children[k].value
                            d.cityName = address[i].children[k].text
                            b.children.push(d)
                            var e = new Object()
                            e.cityCode = address[i].children[k].value
                            e.childeren = []
                            for (var j = 0; j < address[i].children[k].children.length; j++) {
                                var t = new Object()
                                t.areaCode = address[i].children[k].children[j].value
                                t.areaName = address[i].children[k].children[j].text
                                e.childeren.push(t)
                            }
                            aa.push(e)
                        }
                        c.push(b)

                    }
                    if (jgData.province) {
                        var str = '<option value="">请选择省</option>'
                        for (var i1 = 0; i1 < p.length; i1++) {
                            if (jgData.province == p[i1].provinceCode) {
                                str += '<option value="' + p[i1].provinceCode + '" selected="">' + p[i1]
                                    .provinceName + '</option>'
                            } else {
                                str += '<option value="' + p[i1].provinceCode + '">' + p[i1]
                                    .provinceName + '</option>'
                            }

                        }
                        $('#provice').html(str)
                    }
                    if (jgData.city) {
                        var str1 = '<option value="">请选择市</option>'
                        for (var i3 = 0; i3 < c.length; i3++) {

                            if (jgData.province == c[i3].provinceCode) {

                                for (var i2 = 0; i2 < c[i3].children.length; i2++) {

                                    if (jgData.city == c[i3].children[i2].cityCode) {
                                        console.log(c[i3].children[i2])
                                        str1 += '<option value="' + c[i3].children[i2].cityCode +
                                            '" selected="">' + c[i3].children[i2].cityName + '</option>'
                                    } else {
                                        str1 += '<option value="' + c[i3].children[i2].cityCode + '">' +
                                            c[i3].children[i2].cityName + '</option>'
                                    }

                                }
                            }
                        }
                        $('#city').html(str1)
                    }
                    if (jgData.area) {
                        var str2 = '<option value="">请选择县区</option>'
                        for (var i4 = 0; i4 < aa.length; i4++) {

                            if (jgData.city == aa[i4].cityCode) {

                                for (var i5 = 0; i5 < aa[i4].childeren.length; i5++) {

                                    if (jgData.area == aa[i4].childeren[i5].areaCode) {
                                        console.log(aa[i4].childeren[i5])
                                        str2 += '<option value="' + aa[i4].childeren[i5].areaCode +
                                            '" selected="">' + aa[i4].childeren[i5].areaName +
                                            '</option>'
                                    } else {
                                        str2 += '<option value="' + aa[i4].childeren[i5].areaCode +
                                            '">' + aa[i4].childeren[i5].areaName + '</option>'
                                    }

                                }
                            }
                        }
                        $('#area').html(str2)
                    }
                    if (jgData.pAgentLevel != '--') {
                        $('.levelA').show()
                        form.val('cardAdd', {
                            "proportional": (jgData.proportional * 100).toFixed(2)
                        })
                    }
                    subsidySetting = jgData.subsidySetting
                    marketingSubsidies = jgData.marketingSubsidies
                    agencyCustom = jgData.agencyCustom
                    if (subsidySetting == 0 && jgData.pAgentLevel == '--') {
                        getButie()
                        $('#butieBox').show()
                    } else {
                        $('#butieBox').hide()
                    }
                    if (jgData.pAgentLevel != '--') {
                        btOff = false
                    }
                    if (marketingSubsidies == 0 && jgData.pAgentLevel == '--') {

                        $('#yingxiaoBox').show()
                    } else {
                        $('#yingxiaoBox').hide()
                    }
                    form.val('cardAdd', {
                        "agentType": jgData.agentType.toString(),
                        "franchiseType": jgData.franchiseType ? jgData.franchiseType.toString() : 0,
                        "agentName": jgData.agentName,
                        "userName": jgData.userName,
                        "registerCell": jgData.registerCell,
                        "province": jgData.province,
                        "city": jgData.city,
                        "area": jgData.area,
                        "address": jgData.address,
                        "subsidySetting": jgData.subsidySetting == 0 ? true : false,
                        "marketingSubsidies": jgData.marketingSubsidies == 0 ? true : false,
                        "marketSubsidyMoney": jgData.marketSubsidyMoney,
                        "agencyCustom":jgData.agencyCustom == 0 ? true:false
                        // "T1Rate": T1,
                        // "wechatRate":jgData.wechatRate,
                        // "aliRate":jgData.aliRate,
                        // "fuyouRateD1":jgData.fuyouRateD1,
                        // "fuyouRateD0":jgData.fuyouRateD0,
                        // "xdlRateD0":jgData.xdlRateD0,
                        // "xdlRateD1":jgData.xdlRateD1,
                        // "yrmRateD1":jgData.yrmRateD1,
                        // "yrmRateD0":jgData.yrmRateD0,
                    })
                    form.render()
                },
                function(data) {
                    console.log(data)
                }
            )
            var rateList = []
            CmsUtility.postAjaxCall(
                //系统设置
                CmsConfig.addressUrl.Mechanism.getAgentRateNew, {
                    "agentNumber": jgData.agentNumber
                },
                function(data) {
                    data.data.sort(compare('paymentChanneltype'))
                    var rateData = data.data
                    console.log(rateData)
                    for (var i = 0; i < data.data.length; i++) {
                        if (data.data[i].paymentChanneltype == 0) {
                            form.val('cardAdd', {

                                // "T1Rate": T1,

                                "gfAliRate": (data.data[i].rate * 100).toFixed(2),
                            })
                        }
                        if (data.data[i].paymentChanneltype == 1) {
                            form.val('cardAdd', {

                                "gfWeChatRate": (data.data[i].rate * 100).toFixed(2),
                            })

                        }
                        if (data.data[i].paymentChanneltype == 2) {




                            console.log()

                            switch (data.data[i].onePaymentTypeINT) {
                                case 0:
                                    form.val('cardAdd', {

                                        "fyaliRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 1:
                                    form.val('cardAdd', {

                                        "fyweChatRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 2:
                                    form.val('cardAdd', {

                                        "fyJDWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 3:
                                    form.val('cardAdd', {

                                        "fyUnionPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    form.val('cardAdd', {

                                        "fyUnionPayRatetwo": (data.data[i].ysfrate * 100)
                                            .toFixed(2),
                                    })
                                    break;
                                case 5:
                                    form.val('cardAdd', {

                                        "fyQQWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 6:
                                    form.val('cardAdd', {

                                        "fyWingPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                default:
                                    // statements_def
                                    break;
                            }


                        }

                        if (data.data[i].paymentChanneltype == 4) {
                            switch (data.data[i].onePaymentTypeINT) {
                                case 0:
                                    form.val('cardAdd', {

                                        "xdlaliRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 1:
                                    form.val('cardAdd', {

                                        "xdlweChatRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 2:
                                    form.val('cardAdd', {

                                        "xdlJDWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 3:
                                    form.val('cardAdd', {

                                        "xdlUnionPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    form.val('cardAdd', {

                                        "XdlUnionPayRatetwo": (data.data[i].ysfrate * 100)
                                            .toFixed(2),
                                    })
                                    break;
                                case 5:
                                    form.val('cardAdd', {

                                        "xdlQQWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 6:
                                    form.val('cardAdd', {

                                        "xdlWingPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                default:
                                    // statements_def
                                    break;
                            }


                        }
                        if (data.data[i].paymentChanneltype == 5) {
                            switch (data.data[i].onePaymentTypeINT) {
                                case 0:
                                    form.val('cardAdd', {

                                        "sxfaliRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 1:
                                    form.val('cardAdd', {

                                        "sxfweChatRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 2:
                                    form.val('cardAdd', {

                                        "sxfJDWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 3:
                                    form.val('cardAdd', {

                                        "sxfUnionPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    form.val('cardAdd', {

                                        "sxfUnionPayRatetwo": (data.data[i].ysfrate * 100)
                                            .toFixed(2),
                                    })
                                    break;
                                case 5:
                                    form.val('cardAdd', {

                                        "sxfQQWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 6:
                                    form.val('cardAdd', {

                                        "sxfWingPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                default:
                                    // statements_def
                                    break;
                            }


                        }
                        if (data.data[i].paymentChanneltype == 6) {
                            switch (data.data[i].onePaymentTypeINT) {
                                case 0:
                                    form.val('cardAdd', {

                                        "lsweChatRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 1:
                                    form.val('cardAdd', {

                                        "lsaliRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 2:
                                    form.val('cardAdd', {

                                        "lsJDWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 3:
                                    form.val('cardAdd', {

                                        "lsUnionPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    form.val('cardAdd', {

                                        "lsUnionPayRatetwo": (data.data[i].ysfrate * 100)
                                            .toFixed(2),
                                    })
                                    break;
                                case 5:
                                    form.val('cardAdd', {

                                        "lsQQWallet": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 6:
                                    form.val('cardAdd', {

                                        "lsWingPayRate": (data.data[i].rate * 100).toFixed(2),
                                    })
                                    break;
                                case 7:
                                    form.val('cardAdd', {

                                        "lsCreditCardD0": (data.data[i].lsCreditCardD0 * 100).toFixed(2),
                                        "lsCreditCardD1": (data.data[i].lsCreditCardD1 * 100).toFixed(2),
                                        "lsDebitCardD0": (data.data[i].lsDebitCardD0 * 100).toFixed(2),
                                        "lsDebitCardD1": (data.data[i].lsDebitCardD1 * 100).toFixed(2),
                                    })
                                    break;
                                default:
                                    // statements_def
                                    break;
                            }


                        }
                    }
                    // form.val('cardAdd', {

                    //     // "T1Rate": T1,

                    //     "aliRate":rateData[0].rate || '',
                    //     "wecharRate":rateData[1].rate || '',
                    //     "fuyouRateD1":rateData[2].rate || '',
                    //     "fuyouRateD0":rateData[3].rate || '',

                    //     "yrmRateD1":rateData[4].rate || '',
                    //     "yrmRateD0":rateData[5].rate || '',
                    //     "xdlRateD1":rateData[6].rate || '',
                    //     "xdlRateD0":rateData[7].rate || '',
                    // })
                    form.render()
                },
                function(data) {

                }
            )

            function compare(property) {
                return function(a, b) {
                    var value1 = a[property];
                    var value2 = b[property];
                    return value1 - value2;
                }
            }
            // var Arr = jgData.Rate.split('|')
            // var nO = new Array()
            // var T1, D1, D0;
            // for (var i = 0; i < Arr.length; i++) {
            //     if (Arr[i].split(':')[0] == 'T1') {
            //         T1 = Arr[i].split(':')[1]
            //     }
            //     if (Arr[i].split(':')[0] == 'D1') {
            //         D1 = Arr[i].split(':')[1]
            //     }
            //     if (Arr[i].split(':')[0] == 'D0') {
            //         D0 = Arr[i].split(':')[1]
            //     }
            // }
            function getButie() {
                CmsUtility.postAjaxCall(
                    //系统设置
                    '/insAgent/getAgentSubsidy', {
                        "agentNumber": jgData.agentNumber
                    },
                    function(data) {
                        if (data.code == 1000) {
                            var dataInfo = data.data
                            console.log(dataInfo)
                            if (dataInfo.subsidyStandard.indexOf('8') >= 0) {
                                subsidyStandard8 = 0
                            }
                            if (dataInfo.subsidyStandard.indexOf('0') >= 0) {
                                subsidyStandard0 = 0
                            }
                            form.val('cardAdd', {
                                "cappedAmount": dataInfo.cappedAmount,
                                "enterprise": dataInfo.enterprise == 0 ? true : false,
                                "individual": dataInfo.individual == 0 ? true : false,
                                "personal": dataInfo.personal == 0 ? true : false,
                                "startTime": dataInfo.startTime,
                                "endTime": dataInfo.endTime,
                                "cumulative": dataInfo.cumulative,
                                "continuing": (dataInfo.continuing).toString(),
                                "transactionAmount": dataInfo.transactionAmount,
                                "transactionNumber": dataInfo.transactionNumber,
                                "subsidyStandard8": subsidyStandard8 == 0 ? true : false,
                                "subsidyStandard0": subsidyStandard0 == 0 ? true : false,
                            })
                            saleList = dataInfo.ruleJsonList
                            saleList.sort(compare('merchantCount'))
                            subsidyType.enterprise = dataInfo.enterprise
                            subsidyType.individual = dataInfo.individual
                            subsidyType.personal = dataInfo.personal
                            createList()
                        } else {
                            subsidyType = {
                                personal: 1,
                                individual: 1,
                                enterprise: 1
                            }
                            saleList = [{
                                merchantCount: '',
                                subsidyAmount: ''
                            }, ]
                            createList()
                            layer.msg(data.msg)
                        }
                    },
                    function(data) {
                        console.log('222')
                    }
                )
            }
            form.render()

            setTimeout(function() {
                form.render()
            }, 300)
            // if(!!jgData.province){
            //  console.log()
            //  CmsUtility.choosePro(jgData.province);
            // }
            // if(!!jgData.province  && !!jgData.city){
            //  console.log(jgData.province,jgData.city )
            //  CmsUtility.chooseCity(jgData.province,jgData.city)
            // }
            // if(!!jgData.city  &&  !!jgData.area){
            //  CmsUtility.chooseArea(jgData.city,jgData.area)
            // }


            form.on('select(provice)', function(data) {

                var str1 = '<option value="">请选择市</option>'
                for (var i3 = 0; i3 < c.length; i3++) {

                    if (data.value == c[i3].provinceCode) {

                        for (var i2 = 0; i2 < c[i3].children.length; i2++) {


                            str1 += '<option value="' + c[i3].children[i2].cityCode + '">' + c[i3]
                                .children[i2].cityName + '</option>'


                        }
                    }
                }
                $('#city').html(str1)
                var str2 = '<option value="">请选择县区</option>'
                $('#area').html(str2)
                form.render()

            })
            form.on('select(city)', function(data) {

                var str2 = '<option value="">请选择县区</option>'
                for (var i4 = 0; i4 < aa.length; i4++) {
                    if (data.value == aa[i4].cityCode) {
                        for (var i5 = 0; i5 < aa[i4].childeren.length; i5++) {


                            str2 += '<option value="' + aa[i4].childeren[i5].areaCode + '">' + aa[
                                i4].childeren[i5].areaName + '</option>'


                        }
                    }
                }
                $('#area').html(str2)
                form.render()

            })

            form.on('switch(agencyCustom)', function(data) {
            if (btOff == false) {
                layer.msg('下级代理商不可开启返利卡设置')
                form.val('cardAdd', {
                    agencyCustom: data.elem.checked == true ? 0 : 1
                })
                return
            }

            if (data.elem.checked == true) {
                agencyCustom = 0
               
            } else if (data.elem.checked == false) {
                agencyCustom = 1
                
            }
        });
            /*---------- 自定义验证规则 ----------*/
            form.verify({
                title: function(value) {
                    if (value == null) {
                        return '不能为空！';
                    }
                    if (value.length == "") {
                        return '不能为空！';
                    }
                },
                baifenbi: function(value) {
                    // if(value.length != ''){
                    //     if(value.indexOf('%')<0){
                    //         return '费率格式不正确'
                    //     }
                    // }

                },
                aliorwxRate: function(value) {
                    if (parseFloat(value) < 0.2 || parseFloat(value) > 1 || value == '') {
                        return '支/微费率只能在 0.2~1 之间'
                    }
                },
                ysf1Rate: function(value) {
                    if (parseFloat(value) < 0.23 || parseFloat(value) > 1 || value == '') {
                        return '云闪付费率1只能在 0.23~1.00 之间'
                    }
                },
                ysf2Rate: function(value) {
                    if (parseFloat(value) < 0.52 || parseFloat(value) > 1 || value == '') {
                        return '云闪付费率2只能在 0.52~1.00 之间'
                    }
                },
                butie: function(value) {
                    if (subsidySetting == 0) {
                        if (value.length == "") {
                            return '必填项不能为空！';
                        }
                    }
                },
                yingxiao: function(value) {
                    if (marketingSubsidies == 0) {
                        if (value.length == "") {
                            return '必填项不能为空！';
                        }
                    }
                },
                // lsDebitCardD1
                //  0.40-0.60
                // lsCreditCardD1
                // 0.51-1.00
                // lsDebitCardD0
                // 0.42-1.00
                // lsCreditCardD0
                // 0.53-1.00
                lsDebitCardD1: function(value) {
                    if (parseFloat(value) < 0.40 || parseFloat(value) > 1 || value == '') {
                        return '借记卡D1费率只能在 0.40~1.00 之间'
                    }
                },
                lsCreditCardD1: function(value) {
                    if (parseFloat(value) < 0.51 || parseFloat(value) > 1 || value == '') {
                        return '贷记卡D1费率只能在 0.51~1.00 之间'
                    }
                },
                lsDebitCardD0: function(value) {
                    if (parseFloat(value) < 0.42 || parseFloat(value) > 1 || value == '') {
                        return '借记卡D0费率只能在 0.42~1.00 之间'
                    }
                },
                lsCreditCardD0: function(value) {
                    if (parseFloat(value) < 0.53 || parseFloat(value) > 1 || value == '') {
                        return '贷记卡D0费率只能在 0.53~1.00 之间'
                    }
                },
            });
            form.on('switch(subsidySetting)', function(data) {
                if (btOff == false) {
                    layer.msg('下级代理商不可添加补贴设置')
                    form.val('cardAdd', {
                        subsidySetting: data.elem.checked == true ? 0 : 1
                    })
                    return
                }

                if (data.elem.checked == true) {
                    subsidySetting = 0
                    $('#butieBox').show()
                    getButie()
                } else if (data.elem.checked == false) {
                    subsidySetting = 1
                    $('#butieBox').hide()
                }
            });
            form.on('switch(marketingSubsidies)', function(data) {
                if (btOff == false) {
                    layer.msg('下级代理商不可开启营销补贴')
                    form.val('cardAdd', {
                        marketingSubsidies: data.elem.checked == true ? 0 : 1
                    })
                    return
                }

                if (data.elem.checked == true) {
                    marketingSubsidies = 0
                    $('#yingxiaoBox').show()
                } else if (data.elem.checked == false) {
                    marketingSubsidies = 1
                    $('#yingxiaoBox').hide()
                }
            });
            form.on('checkbox(merType)', function(data) {
                var name = data.elem.name
                subsidyType[name] = this.checked == true ? 0 : 1
                console.log(subsidyType)
            })
            form.on('checkbox(standType)', function(data) {
                var name = data.elem.name
                if (name == 'subsidyStandard8') {
                    subsidyStandard8 = this.checked == true ? 0 : 1
                }
                if (name == 'subsidyStandard0') {
                    subsidyStandard0 = this.checked == true ? 0 : 1
                }


            })
            /*---------- 监听提交 ----------*/
            form.on('submit(add)', function(data, index) {
                var addData = data.field
                addData.institutionNumber = userNumber
                addData.deletionFlag = '0'
                addData.agentNumber = agentNumber
                addData.pAgentNumber = jgData.pAgentNumber == '--' ? '' : jgData.pAgentNumber
                if (jgData.pAgentLevel == '--') {
                    addData.agentLevel = 'A'
                }
                if (jgData.pAgentLevel == 'A') {
                    addData.agentLevel = 'B'
                }
                if (jgData.pAgentLevel == 'B') {
                    addData.agentLevel = 'C'
                }
                if (jgData.pAgentLevel == 'C') {
                    addData.agentLevel = 'D'
                }
                if (pyList.indexOf(0) >= 0) {
                    addData.gfAliRate = (addData.gfAliRate / 10000 * 100).toFixed(4)
                } else if (pyList.indexOf(0) < 0) {
                    delete addData.gfAliRate
                }
                if (pyList.indexOf(1) >= 0) {
                    addData.gfWeChatRate = (addData.gfWeChatRate / 10000 * 100).toFixed(4)
                } else if (pyList.indexOf(1) < 0) {
                    delete addData.gfWeChatRate
                }
                if (pyList.indexOf(2) >= 0) {
                    addData.fyweChatRate = (addData.fyweChatRate / 10000 * 100).toFixed(4)
                    addData.fyaliRate = addData.fyweChatRate
                    addData.fyUnionPayRate = (addData.fyUnionPayRate / 10000 * 100).toFixed(4)
                    addData.fyJDWallet = (addData.fyJDWallet / 10000 * 100).toFixed(4)
                    addData.fyQQWallet = (addData.fyQQWallet / 10000 * 100).toFixed(4)
                    addData.fyUnionPayRatetwo = (addData.fyUnionPayRatetwo / 10000 * 100).toFixed(4)
                    addData.fyWingPayRate = (addData.fyWingPayRate / 10000 * 100).toFixed(4)
                } else if (pyList.indexOf(2) < 0) {
                    delete addData.fyweChatRate
                    delete addData.fyaliRate
                    delete addData.fyUnionPayRate
                    delete addData.fyJDWallet
                    delete addData.fyQQWallet
                    delete addData.fyUnionPayRatetwo
                    delete addData.fyWingPayRate
                }
                if (pyList.indexOf(3) < 0) {




                }
                if (pyList.indexOf(4) >= 0) {
                    addData.xdlweChatRate = (addData.xdlweChatRate / 10000 * 100).toFixed(4)

                    addData.xdlaliRate = addData.xdlweChatRate

                    addData.xdlUnionPayRate = (addData.xdlUnionPayRate / 10000 * 100).toFixed(4)

                    addData.xdlJDWallet = (addData.xdlJDWallet / 10000 * 100).toFixed(4)

                    addData.xdlQQWallet = (addData.xdlQQWallet / 10000 * 100).toFixed(4)

                    addData.XdlUnionPayRatetwo = (addData.XdlUnionPayRatetwo / 10000 * 100).toFixed(4)
                    addData.xdlWingPayRate = (addData.xdlWingPayRate / 10000 * 100).toFixed(4)


                } else if (pyList.indexOf(4) < 0) {
                    delete addData.xdlweChatRate
                    delete addData.xdlaliRate
                    delete addData.xdlUnionPayRate
                    delete addData.xdlJDWallet
                    delete addData.xdlQQWallet
                    delete addData.XdlUnionPayRatetwo
                    delete addData.xdlWingPayRate
                }
                if (pyList.indexOf(5) >= 0) {

                    addData.sxfweChatRate = (addData.sxfweChatRate / 10000 * 100).toFixed(4)

                    addData.sxfaliRate = addData.sxfweChatRate

                    addData.sxfUnionPayRate = (addData.sxfUnionPayRate / 10000 * 100).toFixed(4)

                    addData.sxfJDWallet = (addData.sxfJDWallet / 10000 * 100).toFixed(4)

                    addData.sxfQQWallet = (addData.sxfQQWallet / 10000 * 100).toFixed(4)

                    addData.sxfUnionPayRatetwo = (addData.sxfUnionPayRatetwo / 10000 * 100).toFixed(4)
                    addData.sxfWingPayRate = (addData.sxfWingPayRate / 10000 * 100).toFixed(4)


                } else if (pyList.indexOf(5) < 0) {
                    delete addData.sxfweChatRate
                    delete addData.sxfaliRate
                    delete addData.sxfUnionPayRate
                    delete addData.sxfJDWallet
                    delete addData.sxfQQWallet
                    delete addData.sxfUnionPayRatetwo
                    delete addData.sxfWingPayRate
                }
                if (pyList.indexOf(6) >= 0) {
                    addData.lsUnionPayRatetwo = (addData.lsUnionPayRatetwo / 100).toFixed(4)



                    addData.lsweChatRate = (addData.lsweChatRate / 100).toFixed(4)
                    addData.lsaliRate = addData.lsweChatRate
                    addData.lsUnionPayRate = (addData.lsUnionPayRate / 100).toFixed(4)

                    addData.lsJDWallet = (addData.lsJDWallet / 100).toFixed(4)
                    addData.lsQQWallet = (addData.lsQQWallet / 100).toFixed(4)



                    addData.lsWingPayRate = (addData.lsWingPayRate / 100).toFixed(4)
                    addData.lsDebitCardD0 = (addData.lsDebitCardD0 / 100).toFixed(4)
                    addData.lsCreditCardD0 = (addData.lsCreditCardD0 / 100).toFixed(4)
                    addData.lsDebitCardD1 = (addData.lsDebitCardD1 / 100).toFixed(4)
                    addData.lsCreditCardD1 = (addData.lsCreditCardD1 / 100).toFixed(4)

                } else if (pyList.indexOf(6) < 0) {
                    delete addData.lsUnionPayRatetwo
                    delete addData.lsweChatRate
                    delete addData.lsaliRate
                    delete addData.lsUnionPayRate
                    delete addData.lsJDWallet
                    delete addData.lsQQWallet
                    delete addData.lsWingPayRate
                    delete addData.lsDebitCardD0
                    delete addData.lsCreditCardD0
                    delete addData.lsDebitCardD1
                    delete addData.lsCreditCardD1
                }


















                if (jgData.pAgentLevel != '--') {
                    if (addData.proportional == '') {
                        layer.msg('请输入抽成比例')
                        return false
                    }
                    if (isNaN(addData.proportional) == true) {
                        layer.msg('请输入数字')
                        return false
                    }
                    if (addData.proportional < 0 || addData.proportional > 100) {
                        layer.msg('费率需在0-100之间')
                        return false
                    }
                    // else{
                    addData.proportional = (addData.proportional / 10000 * 100).toFixed(4)
                    // }
                }
                addData.pAgentLevel = jgData.pAgentLevel == '--' ? '' : jgData.pAgentLevel
                addData.subsidySetting = subsidySetting
                if (subsidySetting == 0) {
                    
                    addData.rulueInfo = JSON.stringify(saleList)

                    if (subsidyType.personal == 1 && subsidyType.individual == 1 && subsidyType.enterprise == 1) {
                        layer.msg('请至少选择一种补贴商户类型')
                        return
                    }
                    addData.subsidyType = JSON.stringify(subsidyType)
                    if (subsidyStandard8 == 1 && subsidyStandard0 == 1) {
                        layer.msg('请至少选择一条支付类型')
                        return
                    }
                    addData.subsidyStandard = ''
                    if (subsidyStandard8 == 0) {
                        addData.subsidyStandard += 8
                    }
                    if (subsidyStandard0 == 0) {
                        addData.subsidyStandard += 0
                    }
                    if (addData.subsidyStandard.length == 2) {
                        addData.subsidyStandard = addData.subsidyStandard[0] + '|' + addData.subsidyStandard[1]
                    }

                }
                addData.marketingSubsidies = marketingSubsidies
                addData.agencyCustom = agencyCustom
                console.log(addData)
                // return
                // 发送请求
                CmsUtility.postAjaxCall(
                    //系统设置
                    CmsConfig.addressUrl.Mechanism.updateAgentRegister,
                    addData,
                    function(data) {
                        if (data.code == 1000) {
                            setTimeout(function() {
                                $('#quxiao').click()
                            }, 16);
                            parent.layer.msg('更改成功')
                            parent.layui.table.reload('vip_cardList')
                        } else {
                            layer.msg(data.msg)
                        }
                    },
                    function(data) {
                        console.log('222')
                    }
                )
                return false;
            });
        });
    }
    </script>
</body>

</html>